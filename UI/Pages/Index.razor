@page "/"
@using Microsoft.AspNetCore.Authorization
@inject NavigationManager Navigation
@attribute [AllowAnonymous]

@code
{
    [CascadingParameter]
    private Task<AuthenticationState>? AuthenticationState { get; set; }

    protected override async Task OnInitializedAsync()
    {
        if (AuthenticationState != null)
        {
            var userIdentity = (await AuthenticationState).User.Identity;

            if (userIdentity is {IsAuthenticated: true })
            {
                Navigation.NavigateTo("/chat");
                return;
            }
        }
        
        Navigation.NavigateTo("/login");
    }
}
